<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Project</title>
    <!-- Include Chart.js from CDN for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">

</head>
<body>

    <!-- File Upload Form -->
    <form id="upload-form">
        <input type="file" id="file-input" name="file" accept=".csv" required />
        <button type="button" id="upload-btn">Upload CSV</button>
    </form>

    <!-- Charts Container -->
    <div id="charts-container"></div>

    <!-- JavaScript to handle the file upload and process the CSV -->
    <script>
        let charts = []; // Array to hold chart instances

        document.getElementById('upload-btn').addEventListener('click', function() {
            const fileInput = document.getElementById('file-input');
            const file = fileInput.files[0];

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const text = e.target.result;
                    processData(text);
                };
                reader.readAsText(file);
            } else {
                alert('Please select a CSV file first.');
            }
        });

        function processData(csvText) {
            // Assuming CSV text is properly formatted with two columns
            const lines = csvText.trim().split('\n').map(line => line.split(','));
            const labels = lines.map(line => line[0]);
            const data = lines.map(line => parseInt(line[1], 10));

            createChart(labels, data);
        }

        function createChart(labels, data) {
            const chartContainer = document.createElement('div');
            chartContainer.classList.add('chart-container');
            const newCanvas = document.createElement('canvas');
            chartContainer.appendChild(newCanvas);
            document.getElementById('charts-container').appendChild(chartContainer);

            const ctx = newCanvas.getContext('2d');
            const newChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Dataset',
                        data: data,
                        backgroundColor: 'rgba(0, 123, 255, 0.5)',
                        borderColor: 'rgba(0, 123, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            charts.push(newChart);

            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete Chart';
            deleteButton.onclick = function() {
                newChart.destroy();
                chartContainer.remove();
                charts = charts.filter(chart => chart !== newChart);
            };
            chartContainer.appendChild(deleteButton);
        }
    </script>

</body>
</html>
